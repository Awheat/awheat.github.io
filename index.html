<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>一粒麦子</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,initial-scale=0">
	<meta content="telephone=no" name="format-detection" />
	<meta content="email=no" name="format-detection" />
    <meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="stylesheet" type="text/css" href="dist/css/base.css">
	<link rel="stylesheet" type="text/css" href="dist/css/index.css">
</head>
<body>
	<div id="container">
        <!-- 左边内容 -->
		<div class="wraper-left">
            <nav class="nav">
                <a href="#" class="cur">
                    <span>首页</span>
                    <em>Home</em>
                    <i class="arrow"></i>
                </a>
                <a href="#">
                    <span>生活</span>
                    <em>Life</em>
                </a>
                <a href="#">
                    <span>工作</span>
                    <em>Work</em>
                </a>
                <a href="#">
                    <span>关于</span>
                    <em>About</em>
                </a>
            </nav>
		</div>
        <!-- 右边内容 -->
		<div class="wraper-right">
            <!-- topbar -->
            <div class="top-bar">
                <div class="logo">
                    <img src="dist/images/logo.png">
                    <p>不积洼步无以至千里,不积溪流无以成江河。</p>
                </div>
                <div class="concat">
                    <span class="icon-qq"></span>
                    <span class="icon-wechat"></span>
                    <span class="icon-sina-weibo"></span>
                    <span class="icon-github"></span>
                </div>
            </div>

            <!-- slider images -->
            <div class="ctr-list">
                <div class="slider s-life" id="s-life">
                    <!--<img src="dist/images/1.jpg">-->
                    <!--<img src="dist/images/5.jpg">-->
                    <!--<img src="dist/images/4.jpg">-->
                </div>
                <div class="slider s-work" id="s-work">
                </div>
                <div class="slider s-about" id="s-about">
                </div>
            </div>

            <!-- footer -->
            <div class="footer">
                Copyright © 2016 All Right Reserved
            </div>
        </div>
	</div>
</body>
<!-- <script type="text/javascript" src="src/js/index.js"></script> -->
<script type="text/javascript">
    /*
    *   1.数据
    * */
    data = {
        life:[
            {title:"生活丰富多彩", url:'1.jpg'},
            {title:"生活丰富多彩", url:'2.jpg'},
            {title:"生活丰富多彩", url:'3.jpg'}
        ],
        work:[
            {title:"工作丰富多彩", url:'1.jpg'},
            {title:"工作丰富多彩", url:'2.jpg'},
            {title:"工作丰富多彩", url:'3.jpg'}
        ],
        about:[
            {title:"个人丰富多彩", url:'1.jpg'},
            {title:"个人丰富多彩", url:'2.jpg'},
            {title:"个人丰富多彩", url:'3.jpg'}
        ]
    }

    /*
    *   2.构造函数
    * */
    var Slider = function(options){
        this.id = options.id;
        this.data = options.data;

        this.init();
        this.render();
        this.bind();

    }
    /*
    *   3.function=>init()
    * */
    Slider.prototype.init = function(){
        this.sliderWidth = this.id.clientWidth;
        this.ind = 1;
        this.curDate += new Date();
    }
    /*
    *
    *   4.function=>render()
    * */
    Slider.prototype.render = function(){
        /*
        * 获取dom，data，len
        *
        * */
        var elem = this.id;
        var data = this.data;
        var len = data.length;

        /*
        * 创建dom
        * */
        this.domUl = document.createElement('ul');
        this.nextBtn = document.createElement('span');
        this.prevBtn = document.createElement('span');
        this.nextBtn.innerHTML = '>';
        this.prevBtn.innerHTML = '<';
        this.nextBtn.className = 'nextBtn';
        this.prevBtn.className = 'prevBtn';
        for(i in data){
            var domLi = document.createElement('li');
                domLi.style.width = (this.sliderWidth-10) + 'px';
                domLi.innerHTML = '<img src='+'dist/images/'+data[i]['url']+' />';
                this.domUl.appendChild(domLi);
        }

        /*
        * 获取一个元素和最后一个元素
        * */
        var lis = this.domUl.getElementsByTagName('li');
        var domLiFirst = lis[0].cloneNode(true);
        var domLiLast = lis[len-1].cloneNode(true);

        /*
        * 将第一个和最后一个元素分别插入到dom中
        * */
        this.domUl.insertBefore(domLiLast,lis[0]);
        this.domUl.appendChild(domLiFirst);

        /*
        * 设置dom的样式
        * */

        this.domUl.style.width = this.domUl.getElementsByTagName('li').length * this.sliderWidth + 'px';
        this.domUl.style.webkitTransform = 'translate3d(-'+this.ind*this.sliderWidth+'px, 0, 0)';
        /*

        * 将创建好的dom追加到容器中
        * */
        elem.appendChild(this.domUl);
        elem.appendChild(this.nextBtn);
        elem.appendChild(this.prevBtn);
    }
    Slider.prototype.play = function(direction){
//        var ind = this.ind;
//        var len = this.data.length;
//        if(direction == 'left'){
//            if(ind<len){
//                this.ind++;
//            }else{
//                this.ind = 1;
//            }
//
//        }else{
//            if(ind==1){
//                this.ind = 3;
//            }else{
//                this.ind--;
//            }
//        }
//
//        this.domUl.style.webkitTransform = 'translate3d(-'+ind*this.sliderWidth+'px, 0, 0)';
    }
    /*
    *   5.function=>bind()
    * */
    Slider.prototype.bind = function(){
        var _this = this;


        var nextHandler = function(){
            alert("next");
        }

        var prevHandler = function(e){
            var ind = _this.ind;
            var len = _this.data.length;

            if(ind<len){
                ind = _this.ind = len;
            }else{
                ind = _this.ind --;
            }

            _this.domUl.style.webkitTransform = 'translate3d(-'+ind*_this.sliderWidth+'px, 0, 0)';
        }

        this.nextBtn.addEventListener('click',nextHandler,false);
        this.prevBtn.addEventListener('click',prevHandler,false);
    }
    /*
    *   6.load Slider()
    *
    * */
    new Slider({
        id:document.getElementById("s-life"),
        data:data.life
    });
    new Slider({
        id:document.getElementById("s-work"),
        data:data.work
    });
    new Slider({
        id:document.getElementById("s-about"),
        data:data.about
    });
</script>
</html>